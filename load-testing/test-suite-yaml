apiVersion: v1
kind: ConfigMap
metadata:
  name: k6-script-config
data:
  script.js: |
    import http from 'k6/http';
    import { sleep } from 'k6';

    export default function () {
      http.get('http://app-internal.svc.cluster.local');
      sleep(1);
    }
---
apiVersion: k6.io/v1alpha1
kind: K6
metadata:
  name: manual-load-test
spec:
  parallelism: 2
  script:
    configMap:
      name: k6-script-config
      file: script.js
  runner:
    image: grafana/k6:latest
